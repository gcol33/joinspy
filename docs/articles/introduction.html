<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Getting Started with joinspy • joinspy</title>
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Getting Started with joinspy">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">joinspy</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction.html">Getting Started with joinspy</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/index.html">More articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gcol33/joinspy" aria-label="GitHub"><span class="fa fa-github"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Getting Started with joinspy</h1>
                        <h4 data-toc-skip class="author">Gilles
Colling</h4>
            
            <h4 data-toc-skip class="date">2026-01-14</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/gcol33/joinspy/blob/HEAD/vignettes/introduction.Rmd" class="external-link"><code>vignettes/introduction.Rmd</code></a></small>
      <div class="d-none name"><code>introduction.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p><strong>joinspy</strong> provides diagnostic tools for understanding
and debugging data frame joins in R. Instead of discovering join
problems after the fact, joinspy helps you identify issues upfront and
understand what will happen when you join.</p>
<p><strong>Key features:</strong></p>
<ul>
<li>Pre-join diagnostics with <code><a href="../reference/join_spy.html">join_spy()</a></code> and
<code><a href="../reference/key_check.html">key_check()</a></code>
</li>
<li>Duplicate detection with <code><a href="../reference/key_duplicates.html">key_duplicates()</a></code>
</li>
<li>Post-join analysis with <code><a href="../reference/join_explain.html">join_explain()</a></code> and
<code><a href="../reference/join_diff.html">join_diff()</a></code>
</li>
<li>Safe wrappers: <code><a href="../reference/left_join_spy.html">left_join_spy()</a></code>,
<code><a href="../reference/right_join_spy.html">right_join_spy()</a></code>, <code><a href="../reference/inner_join_spy.html">inner_join_spy()</a></code>,
<code><a href="../reference/full_join_spy.html">full_join_spy()</a></code>
</li>
<li>Cardinality enforcement with <code><a href="../reference/join_strict.html">join_strict()</a></code>
</li>
<li>Auto-repair with <code><a href="../reference/join_repair.html">join_repair()</a></code> and
<code><a href="../reference/suggest_repairs.html">suggest_repairs()</a></code>
</li>
<li>Visualization with <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code> and <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>
methods</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install development version from GitHub</span></span>
<span><span class="co"># install.packages("pak")</span></span>
<span><span class="fu">pak</span><span class="fu">::</span><span class="fu">pak</span><span class="op">(</span><span class="st">"gcol33/joinspy"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="what-joinspy-does">What joinspy Does<a class="anchor" aria-label="anchor" href="#what-joinspy-does"></a>
</h2>
<p>joinspy analyzes join keys <strong>before</strong> you join,
detecting:</p>
<ul>
<li>Duplicate keys (causes row multiplication)</li>
<li>Whitespace issues (leading/trailing spaces)</li>
<li>Case mismatches (“ABC” vs “abc”)</li>
<li>Encoding problems (invisible Unicode characters)</li>
<li>NA values in keys</li>
<li>Type mismatches (numeric vs character)</li>
</ul>
</div>
<div class="section level2">
<h2 id="quick-examples">Quick Examples<a class="anchor" aria-label="anchor" href="#quick-examples"></a>
</h2>
<div class="section level3">
<h3 id="pre-join-diagnostics-with-join_spy">Pre-Join Diagnostics with <code>join_spy()</code><a class="anchor" aria-label="anchor" href="#pre-join-diagnostics-with-join_spy"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sample data with issues</span></span>
<span><span class="va">orders</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span></span>
<span>  customer_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D "</span><span class="op">)</span>,</span>
<span>  amount <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span>, <span class="fl">150</span>, <span class="fl">300</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">customers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  customer_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span><span class="op">)</span>,</span>
<span>  name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Alice"</span>, <span class="st">"Bob"</span>, <span class="st">"Carol"</span>, <span class="st">"David"</span>, <span class="st">"Eve"</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get diagnostic report</span></span>
<span><span class="va">report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/join_spy.html">join_spy</a></span><span class="op">(</span><span class="va">orders</span>, <span class="va">customers</span>, by <span class="op">=</span> <span class="st">"customer_id"</span><span class="op">)</span></span></code></pre></div>
<p>Use <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> for a compact data frame of metrics:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">report</span><span class="op">)</span></span>
<span><span class="co">#&gt;               metric value</span></span>
<span><span class="co">#&gt; 1          left_rows  5.00</span></span>
<span><span class="co">#&gt; 2         right_rows  5.00</span></span>
<span><span class="co">#&gt; 3   left_unique_keys  4.00</span></span>
<span><span class="co">#&gt; 4  right_unique_keys  5.00</span></span>
<span><span class="co">#&gt; 5       keys_matched  3.00</span></span>
<span><span class="co">#&gt; 6     keys_left_only  1.00</span></span>
<span><span class="co">#&gt; 7    keys_right_only  2.00</span></span>
<span><span class="co">#&gt; 8         match_rate  0.75</span></span>
<span><span class="co">#&gt; 9             issues  2.00</span></span>
<span><span class="co">#&gt; 10   inner_join_rows  4.00</span></span>
<span><span class="co">#&gt; 11    left_join_rows  5.00</span></span>
<span><span class="co">#&gt; 12   right_join_rows  6.00</span></span>
<span><span class="co">#&gt; 13    full_join_rows  7.00</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="quick-check-with-key_check">Quick Check with <code>key_check()</code><a class="anchor" aria-label="anchor" href="#quick-check-with-key_check"></a>
</h3>
<p>For a fast pass/fail assessment:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/key_check.html">key_check</a></span><span class="op">(</span><span class="va">orders</span>, <span class="va">customers</span>, by <span class="op">=</span> <span class="st">"customer_id"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Key check found 2 issue(s):</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Left table has 1 duplicate key(s) (2 rows affected)</span></span>
<span><span class="co">#&gt; <span style="color: #BB0000;">✖</span> Left table column 'customer_id' has whitespace issues (1 values)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="finding-duplicates-with-key_duplicates">Finding Duplicates with <code>key_duplicates()</code><a class="anchor" aria-label="anchor" href="#finding-duplicates-with-key_duplicates"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/key_duplicates.html">key_duplicates</a></span><span class="op">(</span><span class="va">orders</span>, by <span class="op">=</span> <span class="st">"customer_id"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   customer_id amount .n_duplicates</span></span>
<span><span class="co">#&gt; 2           B    200             2</span></span>
<span><span class="co">#&gt; 3           B    150             2</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="join-wrappers">Join Wrappers<a class="anchor" aria-label="anchor" href="#join-wrappers"></a>
</h2>
<p>Use <code>*_join_spy()</code> functions for joins with automatic
diagnostics:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">orders_clean</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  customer_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span>,</span>
<span>  amount <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">200</span>, <span class="fl">300</span><span class="op">)</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Silent mode for pipelines</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/left_join_spy.html">left_join_spy</a></span><span class="op">(</span><span class="va">orders_clean</span>, <span class="va">customers</span>, by <span class="op">=</span> <span class="st">"customer_id"</span>, .quiet <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span><span class="co">#&gt;   customer_id amount  name</span></span>
<span><span class="co">#&gt; 1           A    100 Alice</span></span>
<span><span class="co">#&gt; 2           B    200   Bob</span></span>
<span><span class="co">#&gt; 3           C    300 Carol</span></span>
<span></span>
<span><span class="co"># Access diagnostics afterward</span></span>
<span><span class="fu"><a href="../reference/last_report.html">last_report</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">match_analysis</span><span class="op">$</span><span class="va">match_rate</span></span>
<span><span class="co">#&gt; [1] 1</span></span></code></pre></div>
<p>Available wrappers:</p>
<table class="table">
<thead><tr class="header">
<th>Function</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="../reference/left_join_spy.html">left_join_spy()</a></code></td>
<td>Left join with diagnostics</td>
</tr>
<tr class="even">
<td><code><a href="../reference/right_join_spy.html">right_join_spy()</a></code></td>
<td>Right join with diagnostics</td>
</tr>
<tr class="odd">
<td><code><a href="../reference/inner_join_spy.html">inner_join_spy()</a></code></td>
<td>Inner join with diagnostics</td>
</tr>
<tr class="even">
<td><code><a href="../reference/full_join_spy.html">full_join_spy()</a></code></td>
<td>Full join with diagnostics</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="cardinality-enforcement">Cardinality Enforcement<a class="anchor" aria-label="anchor" href="#cardinality-enforcement"></a>
</h2>
<p>Use <code><a href="../reference/join_strict.html">join_strict()</a></code> to enforce expected relationships:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">products</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Widget"</span>, <span class="st">"Gadget"</span>, <span class="st">"Gizmo"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">prices</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, price <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Succeeds - 1:1 relationship</span></span>
<span><span class="fu"><a href="../reference/join_strict.html">join_strict</a></span><span class="op">(</span><span class="va">products</span>, <span class="va">prices</span>, by <span class="op">=</span> <span class="st">"id"</span>, expect <span class="op">=</span> <span class="st">"1:1"</span><span class="op">)</span></span>
<span><span class="co">#&gt;   id   name price</span></span>
<span><span class="co">#&gt; 1  1 Widget    10</span></span>
<span><span class="co">#&gt; 2  2 Gadget    20</span></span>
<span><span class="co">#&gt; 3  3  Gizmo    30</span></span></code></pre></div>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Fails - duplicates violate 1:1</span></span>
<span><span class="va">prices_dup</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, price <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">10</span>, <span class="fl">15</span>, <span class="fl">20</span>, <span class="fl">30</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/join_strict.html">join_strict</a></span><span class="op">(</span><span class="va">products</span>, <span class="va">prices_dup</span>, by <span class="op">=</span> <span class="st">"id"</span>, expect <span class="op">=</span> <span class="st">"1:1"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;">:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Cardinality violation: expected 1:1 but found 1:m</span></span>
<span><span class="co">#&gt;   Left duplicates: 0, Right duplicates: 1</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th>Cardinality</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>"1:1"</code></td>
<td>Each key unique in both tables</td>
</tr>
<tr class="even">
<td><code>"1:m"</code></td>
<td>Left keys unique, right may duplicate</td>
</tr>
<tr class="odd">
<td><code>"m:1"</code></td>
<td>Right keys unique, left may duplicate</td>
</tr>
<tr class="even">
<td><code>"m:m"</code></td>
<td>No constraints</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="auto-repair">Auto-Repair<a class="anchor" aria-label="anchor" href="#auto-repair"></a>
</h2>
<p>Fix common issues automatically:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">messy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">" A"</span>, <span class="st">"B "</span>, <span class="st">"  C  "</span><span class="op">)</span>,</span>
<span>  value <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span>
<span>  stringsAsFactors <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Preview repairs</span></span>
<span><span class="fu"><a href="../reference/join_repair.html">join_repair</a></span><span class="op">(</span><span class="va">messy</span>, by <span class="op">=</span> <span class="st">"id"</span>, dry_run <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Repair Preview (Dry Run)</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Left table (x)</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #00BB00;">id</span>: trimmed whitespace (3)</span></span>
<span></span>
<span><span class="co"># Apply repairs</span></span>
<span><span class="va">fixed</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/join_repair.html">join_repair</a></span><span class="op">(</span><span class="va">messy</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Repaired <span style="color: #0000BB;">3</span> value(s)</span></span>
<span><span class="va">fixed</span><span class="op">$</span><span class="va">id</span></span>
<span><span class="co">#&gt; [1] "A" "B" "C"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="post-join-diagnostics">Post-Join Diagnostics<a class="anchor" aria-label="anchor" href="#post-join-diagnostics"></a>
</h2>
<div class="section level3">
<h3 id="explaining-row-count-changes">Explaining Row Count Changes<a class="anchor" aria-label="anchor" href="#explaining-row-count-changes"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">orders_dup</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, product <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">inventory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span><span class="op">)</span>, location <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"NY"</span>, <span class="st">"LA"</span>, <span class="st">"NY"</span>, <span class="st">"LA"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">orders_dup</span>, <span class="va">inventory</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/join_explain.html">join_explain</a></span><span class="op">(</span><span class="va">result</span>, <span class="va">orders_dup</span>, <span class="va">inventory</span>, by <span class="op">=</span> <span class="st">"id"</span>, type <span class="op">=</span> <span class="st">"inner"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Join Explanation</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Row Counts</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Left table (x): <span style="color: #0000BB;">3</span> rows</span></span>
<span><span class="co">#&gt; Right table (y): <span style="color: #0000BB;">4</span> rows</span></span>
<span><span class="co">#&gt; Result: <span style="color: #0000BB;">4</span> rows</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Result has <span style="color: #0000BB;">1</span> more rows than left table</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Why the row count changed</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> Right table has 1 duplicate key(s) - each match creates multiple rows</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="beforeafter-comparison">Before/After Comparison<a class="anchor" aria-label="anchor" href="#beforeafter-comparison"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">before</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, val <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"a"</span>, <span class="st">"b"</span>, <span class="st">"c"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">after</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span><span class="va">before</span>, <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">2</span><span class="op">:</span><span class="fl">4</span>, name <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span><span class="op">)</span><span class="op">)</span>, by <span class="op">=</span> <span class="st">"id"</span>, all <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/join_diff.html">join_diff</a></span><span class="op">(</span><span class="va">before</span>, <span class="va">after</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Join Diff</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Dimensions</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Before: <span style="color: #0000BB;">3</span> rows x <span style="color: #0000BB;">2</span> columns</span></span>
<span><span class="co">#&gt; After: <span style="color: #0000BB;">4</span> rows x <span style="color: #0000BB;">3</span> columns</span></span>
<span><span class="co">#&gt; Change: <span style="color: #0000BB;">"+1"</span> rows, <span style="color: #0000BB;">"+1"</span> columns</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Column Changes</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> Added: <span style="color: #00BB00;">name</span></span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ── <span style="font-weight: bold;">Key Analysis</span> ──</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Unique keys before: <span style="color: #0000BB;">3</span></span></span>
<span><span class="co">#&gt; Unique keys after: <span style="color: #0000BB;">4</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="visualization">Visualization<a class="anchor" aria-label="anchor" href="#visualization"></a>
</h2>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">orders</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span>, val <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span>
<span><span class="va">customers</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">7</span>, name <span class="op">=</span> <span class="va">letters</span><span class="op">[</span><span class="fl">3</span><span class="op">:</span><span class="fl">7</span><span class="op">]</span><span class="op">)</span></span>
<span></span>
<span><span class="va">report</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/join_spy.html">join_spy</a></span><span class="op">(</span><span class="va">orders</span>, <span class="va">customers</span>, by <span class="op">=</span> <span class="st">"id"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">report</span><span class="op">)</span>  <span class="co"># Venn diagram</span></span></code></pre></div>
<p><img src="introduction_files/figure-html/unnamed-chunk-12-1.png" class="r-plt" alt="" width="480"></p>
</div>
<div class="section level2">
<h2 id="quick-reference">Quick Reference<a class="anchor" aria-label="anchor" href="#quick-reference"></a>
</h2>
<div class="section level3">
<h3 id="join_spy">join_spy()<a class="anchor" aria-label="anchor" href="#join_spy"></a>
</h3>
<p>Comprehensive pre-join diagnostic report.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/join_spy.html">join_spy</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">by</span>, sample <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>x</code></td>
<td>Left data frame</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td><code>y</code></td>
<td>Right data frame</td>
<td><em>required</em></td>
</tr>
<tr class="odd">
<td><code>by</code></td>
<td>Column name(s) to join by</td>
<td><em>required</em></td>
</tr>
<tr class="even">
<td><code>sample</code></td>
<td>Sample size for large datasets</td>
<td><code>NULL</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong>: <code>JoinReport</code> S3 object with
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>, <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>, and <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>
methods.</p>
</div>
<div class="section level3">
<h3 id="key_check">key_check()<a class="anchor" aria-label="anchor" href="#key_check"></a>
</h3>
<p>Quick pass/fail key quality assessment.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/key_check.html">key_check</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">by</span><span class="op">)</span></span></code></pre></div>
<p><strong>Returns</strong>: Logical <code>TRUE</code> if keys are
clean, <code>FALSE</code> otherwise (with messages).</p>
</div>
<div class="section level3">
<h3 id="join_strict">join_strict()<a class="anchor" aria-label="anchor" href="#join_strict"></a>
</h3>
<p>Join with cardinality enforcement.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/join_strict.html">join_strict</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">by</span>, type <span class="op">=</span> <span class="st">"left"</span>, expect <span class="op">=</span> <span class="st">"1:1"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="33%">
<col width="39%">
<col width="27%">
</colgroup>
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>type</code></td>
<td>Join type: <code>"left"</code>, <code>"right"</code>,
<code>"inner"</code>, <code>"full"</code>
</td>
<td><code>"left"</code></td>
</tr>
<tr class="even">
<td><code>expect</code></td>
<td>Expected cardinality: <code>"1:1"</code>, <code>"1:m"</code>,
<code>"m:1"</code>, <code>"m:m"</code>
</td>
<td><code>"1:1"</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong>: Joined data frame, or error if cardinality
violated.</p>
</div>
<div class="section level3">
<h3 id="join_repair">join_repair()<a class="anchor" aria-label="anchor" href="#join_repair"></a>
</h3>
<p>Automatically fix common key issues.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/join_repair.html">join_repair</a></span><span class="op">(</span><span class="va">x</span>, y <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">by</span>, trim_whitespace <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            standardize_case <span class="op">=</span> <span class="cn">NULL</span>, remove_invisible <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>            empty_to_na <span class="op">=</span> <span class="cn">FALSE</span>, dry_run <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th>Parameter</th>
<th>Description</th>
<th>Default</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>trim_whitespace</code></td>
<td>Remove leading/trailing whitespace</td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td><code>standardize_case</code></td>
<td>Convert to <code>"lower"</code> or <code>"upper"</code>
</td>
<td><code>NULL</code></td>
</tr>
<tr class="odd">
<td><code>remove_invisible</code></td>
<td>Remove invisible Unicode characters</td>
<td><code>TRUE</code></td>
</tr>
<tr class="even">
<td><code>empty_to_na</code></td>
<td>Convert <code>""</code> to <code>NA</code>
</td>
<td><code>FALSE</code></td>
</tr>
<tr class="odd">
<td><code>dry_run</code></td>
<td>Preview changes without modifying</td>
<td><code>FALSE</code></td>
</tr>
</tbody>
</table>
<p><strong>Returns</strong>: Repaired data frame(s).</p>
</div>
</div>
<div class="section level2">
<h2 id="see-also">See Also<a class="anchor" aria-label="anchor" href="#see-also"></a>
</h2>
<ul>
<li>
<code><a href="../articles/common-issues.html">vignette("common-issues")</a></code> - Catalogue of join problems
and solutions</li>
<li>
<code><a href="../reference/join_spy.html">?join_spy</a></code>, <code><a href="../reference/key_check.html">?key_check</a></code>,
<code><a href="../reference/join_strict.html">?join_strict</a></code>, <code><a href="../reference/join_repair.html">?join_repair</a></code>
</li>
</ul>
</div>
<div class="section level2">
<h2 id="session-info">Session Info<a class="anchor" aria-label="anchor" href="#session-info"></a>
</h2>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/sessionInfo.html" class="external-link">sessionInfo</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; R version 4.5.2 (2025-10-31 ucrt)</span></span>
<span><span class="co">#&gt; Platform: x86_64-w64-mingw32/x64</span></span>
<span><span class="co">#&gt; Running under: Windows 11 x64 (build 26200)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Matrix products: default</span></span>
<span><span class="co">#&gt;   LAPACK version 3.12.1</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; locale:</span></span>
<span><span class="co">#&gt; [1] LC_COLLATE=English_United States.utf8 </span></span>
<span><span class="co">#&gt; [2] LC_CTYPE=English_United States.utf8   </span></span>
<span><span class="co">#&gt; [3] LC_MONETARY=English_United States.utf8</span></span>
<span><span class="co">#&gt; [4] LC_NUMERIC=C                          </span></span>
<span><span class="co">#&gt; [5] LC_TIME=English_United States.utf8    </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; time zone: Europe/Luxembourg</span></span>
<span><span class="co">#&gt; tzcode source: internal</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; attached base packages:</span></span>
<span><span class="co">#&gt; [1] stats     graphics  grDevices utils     datasets  methods   base     </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; other attached packages:</span></span>
<span><span class="co">#&gt; [1] joinspy_0.7.0</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; loaded via a namespace (and not attached):</span></span>
<span><span class="co">#&gt;  [1] vctrs_0.6.5       cli_3.6.5         knitr_1.51        rlang_1.1.6      </span></span>
<span><span class="co">#&gt;  [5] xfun_0.55         otel_0.2.0        textshaping_1.0.4 jsonlite_2.0.0   </span></span>
<span><span class="co">#&gt;  [9] glue_1.8.0        htmltools_0.5.9   ragg_1.5.0        sass_0.4.10      </span></span>
<span><span class="co">#&gt; [13] rmarkdown_2.30    evaluate_1.0.5    jquerylib_0.1.4   fastmap_1.2.0    </span></span>
<span><span class="co">#&gt; [17] yaml_2.3.12       lifecycle_1.0.5   compiler_4.5.2    fs_1.6.6         </span></span>
<span><span class="co">#&gt; [21] htmlwidgets_1.6.4 systemfonts_1.3.1 digest_0.6.39     R6_2.6.1         </span></span>
<span><span class="co">#&gt; [25] pillar_1.11.1     bslib_0.9.0       tools_4.5.2       pkgdown_2.2.0    </span></span>
<span><span class="co">#&gt; [29] cachem_1.1.0      desc_1.4.3</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Gilles Colling.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
